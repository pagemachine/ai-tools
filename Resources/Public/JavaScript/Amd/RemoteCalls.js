define(["exports"],(function(t){"use strict";const e={images:TYPO3.settings.ajaxUrls.aitools_ai_tools_images,credits:TYPO3.settings.ajaxUrls.aitools_ai_tools_credits};async function a(t,e){var a=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&");return new Promise(((t,r)=>{var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&200===this.status){var e=JSON.parse(this.responseText);if(e.error)return void r(e.error);t(e)}else 200!==this.status&&r("Error: status "+this.status)},n.send(a)}))}t.callAjaxCreditsAction=async function(t){return a({action:"credits",...t},e.credits).then((t=>{if(t)return t;throw"Error: empty response"}))},t.callAjaxMetaGenerateAction=async function(t,r,n,s,o){const i={action:"generateMetaData",target:t,"target-language":r,textPrompt:n,textPromptLanguage:s,translationProvider:o};return top.TYPO3.Notification.info("Generating Metadata","Generating Metadata...",5),a(i,e.images).then((t=>{if(t)return top.TYPO3.Notification.success("Generated Metadata","Generated Metadata successful",5),t;throw"Error: empty response"})).catch((t=>{throw top.TYPO3.Notification.error("Error","(Meta) Error: "+t,5),t}))},t.callAjaxSaveMetaDataAction=async function(t,r,n,s=0){return a({action:"saveMetaData",target:t,"target-language":r,altText:n,translate:s},e.images).then((t=>{if(t)return top.TYPO3.Notification.success("Saved Metadata successful","Saved Metadata successful",5),t;throw"Error: empty response"})).catch((t=>{throw top.TYPO3.Notification.error("Error","(Saving) Error: "+t,5),t}))}}));
