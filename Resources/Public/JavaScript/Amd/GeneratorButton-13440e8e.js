define(["exports","jquery","./RemoteCalls-1b4ca95c"],(function(t,e,a){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(e);class n{static CSS_CLASSES={TRIGGER:"t3js-alternative-generator-trigger",CLICK_HANDLED:"click-handled",GENERATING:"generating",AI_TOOLS_GENERATING:"t3js-ai-tools-generating"};updateHook=null;constructor(){this.initGeneratorButton()}initGeneratorButton(){const t=o.default(`.${n.CSS_CLASSES.TRIGGER}`).not(`.${n.CSS_CLASSES.CLICK_HANDLED}`);t.addClass(n.CSS_CLASSES.CLICK_HANDLED),t.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.triggerGeneratorButton(o.default(t.currentTarget))}))}async triggerGeneratorButton(t){const e=t.data("file-identifier"),r=t.data("target-language"),S=o.default(t.data("output-target")),l=t.data("show-target");let i=t.data("text-prompt");t.data("text-prompt-field")&&(i=o.default(t.data("text-prompt-field")).val()),t.prop("disabled",!0),t.addClass(n.CSS_CLASSES.GENERATING),S.prop("disabled",!0),S.addClass(n.CSS_CLASSES.AI_TOOLS_GENERATING);try{const t=await a.callAjaxMetaGenerateAction(e,r,i);console.log("Prompt generated",t),S.val(t.alternative),S.trigger("change"),this.updateHook&&this.updateHook(S,t)}finally{t.prop("disabled",!1),t.removeClass(n.CSS_CLASSES.GENERATING),S.prop("disabled",!1),S.removeClass(n.CSS_CLASSES.AI_TOOLS_GENERATING),l&&o.default(l).show()}}}t.GeneratorButton=n}));
