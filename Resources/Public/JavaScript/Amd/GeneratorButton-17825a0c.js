define(["exports","jquery","./RemoteCalls-4331d514"],(function(t,e,a){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=r(e);class o{static CSS_CLASSES={TRIGGER:"t3js-alternative-generator-trigger",CLICK_HANDLED:"click-handled",GENERATING:"generating",AI_TOOLS_GENERATING:"t3js-ai-tools-generating"};updateHook=null;constructor(){this.initGeneratorButton()}initGeneratorButton(){const t=l.default(`.${o.CSS_CLASSES.TRIGGER}`).not(`.${o.CSS_CLASSES.CLICK_HANDLED}`);t.addClass(o.CSS_CLASSES.CLICK_HANDLED),t.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.triggerGeneratorButton(l.default(t.currentTarget))}))}async triggerGeneratorButton(t){const e=t.data("file-identifier"),r=t.data("target-language"),n=l.default(t.data("output-target")),d=t.data("show-target");let i=t.data("text-prompt");t.data("text-prompt-field")&&(i=l.default(t.data("text-prompt-field")).val());let S=t.data("text-imagelabel");t.data("text-imagelabel-field")&&(S=l.default(t.data("text-imagelabel-field")).val()),t.prop("disabled",!0),t.addClass(o.CSS_CLASSES.GENERATING),n.prop("disabled",!0),n.addClass(o.CSS_CLASSES.AI_TOOLS_GENERATING);try{const t=await a.callAjaxMetaGenerateAction(e,r,i,S);console.log("Prompt generated",t),n.val(t.alternative),n.trigger("change"),this.updateHook&&this.updateHook(n,t)}finally{t.prop("disabled",!1),t.removeClass(o.CSS_CLASSES.GENERATING),n.prop("disabled",!1),n.removeClass(o.CSS_CLASSES.AI_TOOLS_GENERATING),d&&l.default(d).show()}}}t.GeneratorButton=o}));
