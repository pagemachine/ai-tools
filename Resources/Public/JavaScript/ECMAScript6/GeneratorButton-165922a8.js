import t from"jquery";import{c as a}from"./RemoteCalls-daf43ba7.js";class e{static CSS_CLASSES={TRIGGER:"t3js-alternative-generator-trigger",CLICK_HANDLED:"click-handled",GENERATING:"generating",AI_TOOLS_GENERATING:"t3js-ai-tools-generating"};updateHook=null;constructor(){this.initGeneratorButton()}initGeneratorButton(){const a=t(`.${e.CSS_CLASSES.TRIGGER}`).not(`.${e.CSS_CLASSES.CLICK_HANDLED}`);a.addClass(e.CSS_CLASSES.CLICK_HANDLED),a.on("click",(a=>{a.preventDefault(),a.stopPropagation(),this.triggerGeneratorButton(t(a.currentTarget))}))}async triggerGeneratorButton(r){const o=r.data("file-identifier"),S=r.data("target-language"),l=t(r.data("output-target")),i=r.data("show-target");let s=r.data("text-prompt");r.data("text-prompt-field")&&(s=t(r.data("text-prompt-field")).val());let d=r.data("text-imagelabel");r.data("text-imagelabel-field")&&(d=t(r.data("text-imagelabel-field")).val()),r.prop("disabled",!0),r.addClass(e.CSS_CLASSES.GENERATING),l.prop("disabled",!0),l.addClass(e.CSS_CLASSES.AI_TOOLS_GENERATING);try{const t=await a(o,S,s,d);console.log("Prompt generated",t),l.val(t.alternative),l.trigger("change"),this.updateHook&&this.updateHook(l,t)}finally{r.prop("disabled",!1),r.removeClass(e.CSS_CLASSES.GENERATING),l.prop("disabled",!1),l.removeClass(e.CSS_CLASSES.AI_TOOLS_GENERATING),i&&t(i).show()}}}export{e as G};
