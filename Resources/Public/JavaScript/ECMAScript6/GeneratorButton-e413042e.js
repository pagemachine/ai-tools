import t from"jquery";import{c as a}from"./RemoteCalls-a7727be1.js";class e{static CSS_CLASSES={TRIGGER:"t3js-alternative-generator-trigger",CLICK_HANDLED:"click-handled",GENERATING:"generating",AI_TOOLS_GENERATING:"t3js-ai-tools-generating"};updateHook=null;constructor(){this.initGeneratorButton()}initGeneratorButton(){const a=t(`.${e.CSS_CLASSES.TRIGGER}`).not(`.${e.CSS_CLASSES.CLICK_HANDLED}`);a.addClass(e.CSS_CLASSES.CLICK_HANDLED),a.on("click",(a=>{a.preventDefault(),a.stopPropagation(),this.triggerGeneratorButton(t(a.currentTarget))}))}async triggerGeneratorButton(l){const r=l.data("file-identifier"),i=l.data("target-language"),o=t(l.data("output-target")),s=l.data("show-target");let d=l.data("text-prompt");l.data("text-prompt-field")&&(d=t(l.data("text-prompt-field")).val());let S=l.data("text-imagelabel"),n=l.data("text-imagelabel");l.data("text-imagelabel-field")&&(S=l.data("text-imagelabel-field"),n=t(l.data("text-imagelabel-field")).val());let g="";t("#tag-div-"+S.replace("#selectedimageLabel-","")).children().not(".reset-tag").each((function(){"inline-block"===t(this).css("display")&&(g+=t(this).data("value")+",")})),g=g.replace(/,$/,""),l.prop("disabled",!0),l.addClass(e.CSS_CLASSES.GENERATING),o.prop("disabled",!0),o.addClass(e.CSS_CLASSES.AI_TOOLS_GENERATING);try{const t=await a(r,i,d,n,g);console.log("Prompt generated",t),o.val(t.alternative),o.trigger("change"),this.updateHook&&this.updateHook(o,t)}finally{l.prop("disabled",!1),l.removeClass(e.CSS_CLASSES.GENERATING),o.prop("disabled",!1),o.removeClass(e.CSS_CLASSES.AI_TOOLS_GENERATING),s&&t(s).show()}}}export{e as G};
